(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{8335:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>ex});var a=t(6166),r=t(5766),l=t(9419),n=t(7984),i=t(8294),o=t(9069),c=t(4347),d=t(1912),m=t(2375),x=t(5513),u=t(8886),h=t(3244),g=t(2781),p=t(7798),j=t(5430),f=t(8926),y=t(3981),b=t(2905),N=t(4375),v=t(7421),w=t(8493),k=t(3191),S=t(4431),A=t(6289),C=t(9160),M=t(146);let F="https://attendance-iq-api-production.up.railway.app";console.log("API Configuration:"),console.log("NEXT_PUBLIC_API_URL:","https://attendance-iq-api-production.up.railway.app"),console.log("Using API_BASE_URL:",F);let P=M.A.create({baseURL:F,headers:{"Content-Type":"application/json"}});P.interceptors.request.use(e=>{let s=localStorage.getItem("token");return s&&(e.headers.Authorization="Bearer ".concat(s)),e},e=>Promise.reject(e)),P.interceptors.response.use(e=>e,e=>{var s;return(null==(s=e.response)?void 0:s.status)===401&&(localStorage.removeItem("token"),window.location.reload()),Promise.reject(e)});let L=(0,r.createContext)(void 0);function R(e){let{children:s}=e,[t,l]=(0,r.useState)(null),[n,i]=(0,r.useState)(!0);(0,r.useEffect)(()=>{let e=localStorage.getItem("token");console.log("AuthContext: Token from localStorage:",e),e?P.get("/auth/profile").then(e=>{console.log("AuthContext: Profile response:",e.data),l(e.data)}).catch(e=>{console.error("AuthContext: Profile error:",e),localStorage.removeItem("token")}).finally(()=>{i(!1)}):(console.log("AuthContext: No token found"),i(!1))},[]);let o=async(e,s)=>{try{let{access_token:t,user:a}=(await P.post("/auth/login",{email:e,password:s})).data;console.log("Login: Received token:",t),console.log("Login: Received user:",a),localStorage.setItem("token",t),l(a)}catch(e){var t,a;throw console.error("Login error:",e),Error((null==(a=e.response)||null==(t=a.data)?void 0:t.message)||"Login failed")}},c=async(e,s,t,a)=>{try{let{access_token:r,user:n}=(await P.post("/auth/register",{name:e,email:s,password:t,role:a})).data;localStorage.setItem("token",r),l(n)}catch(e){var r,n;throw Error((null==(n=e.response)||null==(r=n.data)?void 0:r.message)||"Registration failed")}};return(0,a.jsx)(L.Provider,{value:{user:t,login:o,register:c,logout:()=>{localStorage.removeItem("token"),l(null)},loading:n},children:s})}function D(){let e=(0,r.useContext)(L);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}let E=b.Ik({email:b.Yj().email("Invalid email address"),password:b.Yj().min(6,"Password must be at least 6 characters")}),I=b.Ik({name:b.Yj().min(2,"Name must be at least 2 characters"),email:b.Yj().email("Invalid email address"),password:b.Yj().min(6,"Password must be at least 6 characters"),confirmPassword:b.Yj(),role:b.k5(["TEACHER","STUDENT"])}).refine(e=>e.password===e.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]});function T(e){let{onBack:s}=e,[t,l]=(0,r.useState)(!0),[n,i]=(0,r.useState)(!1),[o,c]=(0,r.useState)(""),[d,m]=(0,r.useState)(!1),{login:x,register:u}=D(),h=(0,f.mN)({resolver:(0,y.u)(E)}),g=(0,f.mN)({resolver:(0,y.u)(I)}),p=async e=>{m(!0),c("");try{await x(e.email,e.password)}catch(e){c(e.message)}finally{m(!1)}},j=async e=>{m(!0),c("");try{await u(e.name,e.email,e.password,e.role)}catch(e){c(e.message)}finally{m(!1)}};return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8 bg-opacity-50",children:[(0,a.jsxs)("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[s&&(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsxs)("button",{onClick:s,className:"flex items-center text-cmu-maroon hover:text-cmu-maroon-dark transition-colors",children:[(0,a.jsx)(N.A,{className:"h-5 w-5 mr-2"}),"Back to Home"]})}),(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)(C.default,{size:80,variant:"color",showText:!1})}),(0,a.jsx)("h2",{className:"mt-6 text-center text-3xl font-extrabold text-cmu-maroon",children:"AttendIQ"}),(0,a.jsx)("p",{className:"mt-2 text-center text-lg font-medium text-gray-700",children:t?"Sign in to your account":"Create your account"})]}),(0,a.jsx)("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:(0,a.jsxs)("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:[o&&(0,a.jsx)("div",{className:"mb-4 bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded",children:o}),t?(0,a.jsxs)("form",{className:"space-y-6",onSubmit:h.handleSubmit(p),children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email address"}),(0,a.jsxs)("div",{className:"mt-1 relative",children:[(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,a.jsx)(v.A,{className:"h-5 w-5 text-gray-400"})}),(0,a.jsx)("input",{...h.register("email"),type:"email",autoComplete:"email",className:"appearance-none block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Enter your email"})]}),h.formState.errors.email&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:h.formState.errors.email.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),(0,a.jsxs)("div",{className:"mt-1 relative",children:[(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,a.jsx)(w.A,{className:"h-5 w-5 text-gray-400"})}),(0,a.jsx)("input",{...h.register("password"),type:n?"text":"password",autoComplete:"current-password",className:"appearance-none block w-full pl-10 pr-10 py-2 border border-gray-300 rounded-md placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Enter your password"}),(0,a.jsx)("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:(0,a.jsx)("button",{type:"button",onClick:()=>i(!n),className:"text-gray-400 hover:text-gray-500",children:n?(0,a.jsx)(k.A,{className:"h-5 w-5"}):(0,a.jsx)(S.A,{className:"h-5 w-5"})})})]}),h.formState.errors.password&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:h.formState.errors.password.message})]}),(0,a.jsx)("div",{children:(0,a.jsx)("button",{type:"submit",disabled:d,className:"btn-cmu-primary w-full flex justify-center py-3 px-4 text-sm font-medium disabled:opacity-50",children:d?"Signing in...":"Sign in"})})]}):(0,a.jsxs)("form",{className:"space-y-6",onSubmit:g.handleSubmit(j),children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Full Name"}),(0,a.jsxs)("div",{className:"mt-1 relative",children:[(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,a.jsx)(A.A,{className:"h-5 w-5 text-gray-400"})}),(0,a.jsx)("input",{...g.register("name"),type:"text",autoComplete:"name",className:"appearance-none block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Enter your full name"})]}),g.formState.errors.name&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:g.formState.errors.name.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email address"}),(0,a.jsxs)("div",{className:"mt-1 relative",children:[(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,a.jsx)(v.A,{className:"h-5 w-5 text-gray-400"})}),(0,a.jsx)("input",{...g.register("email"),type:"email",autoComplete:"email",className:"appearance-none block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Enter your email"})]}),g.formState.errors.email&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:g.formState.errors.email.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"role",className:"block text-sm font-medium text-gray-700",children:"Role"}),(0,a.jsxs)("select",{...g.register("role"),className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md",children:[(0,a.jsx)("option",{value:"TEACHER",children:"Teacher"}),(0,a.jsx)("option",{value:"STUDENT",children:"Student"})]}),g.formState.errors.role&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:g.formState.errors.role.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),(0,a.jsxs)("div",{className:"mt-1 relative",children:[(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,a.jsx)(w.A,{className:"h-5 w-5 text-gray-400"})}),(0,a.jsx)("input",{...g.register("password"),type:n?"text":"password",autoComplete:"new-password",className:"appearance-none block w-full pl-10 pr-10 py-2 border border-gray-300 rounded-md placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Enter your password"}),(0,a.jsx)("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:(0,a.jsx)("button",{type:"button",onClick:()=>i(!n),className:"text-gray-400 hover:text-gray-500",children:n?(0,a.jsx)(k.A,{className:"h-5 w-5"}):(0,a.jsx)(S.A,{className:"h-5 w-5"})})})]}),g.formState.errors.password&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:g.formState.errors.password.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:"Confirm Password"}),(0,a.jsxs)("div",{className:"mt-1 relative",children:[(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,a.jsx)(w.A,{className:"h-5 w-5 text-gray-400"})}),(0,a.jsx)("input",{...g.register("confirmPassword"),type:n?"text":"password",autoComplete:"new-password",className:"appearance-none block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Confirm your password"})]}),g.formState.errors.confirmPassword&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:g.formState.errors.confirmPassword.message})]}),(0,a.jsx)("div",{children:(0,a.jsx)("button",{type:"submit",disabled:d,className:"btn-cmu-primary w-full flex justify-center py-3 px-4 text-sm font-medium disabled:opacity-50",children:d?"Creating account...":"Create account"})})]})]})}),(0,a.jsxs)("p",{className:"mt-10 text-center text-sm text-gray-600",children:[t?"Don't have an account? ":"Already have an account? ",(0,a.jsx)("button",{type:"button",onClick:()=>{l(!t),c(""),h.reset(),g.reset()},className:"font-medium text-cmu-maroon hover:text-cmu-maroon-dark",children:t?"Sign up":"Sign in"})]})]})}var U=t(8181),G=t(7878),B=t(9144),O=t(7048),z=t(6755),V=t(7727),_=t(634);function Q(e){let{classId:s,onBack:t}=e,[l,i]=(0,r.useState)(null),[o,c]=(0,r.useState)(!0),[x,u]=(0,r.useState)(""),[h,g]=(0,r.useState)([]),[p,f]=(0,r.useState)(!1);(0,r.useEffect)(()=>{y(),b()},[s]);let y=async()=>{try{c(!0);let e=await P.get("/classes/".concat(s,"/details"));i(e.data)}catch(s){var e,t;u((null==(t=s.response)||null==(e=t.data)?void 0:e.message)||"Failed to fetch class details")}finally{c(!1)}},b=async()=>{try{let e=await P.get("/attendance/flagged-students/".concat(s));g(e.data)}catch(e){console.error("Error fetching flagged students:",e)}};return o?(0,a.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):x?(0,a.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:x}):l?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"flex items-center space-x-4",children:(0,a.jsxs)("button",{onClick:t,className:"flex items-center space-x-2 text-gray-600 hover:text-gray-800",children:[(0,a.jsx)(N.A,{className:"h-5 w-5"}),(0,a.jsx)("span",{children:"Back to Classes"})]})}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,a.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200 bg-gradient-to-r from-cmu-maroon to-cmu-maroon-dark text-white",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold",children:l.class.name}),l.class.subject&&(0,a.jsx)("p",{className:"text-lg text-cmu-gold-light mt-1",children:l.class.subject})]}),(0,a.jsx)("div",{className:"p-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Class Information"}),(0,a.jsxs)("div",{className:"space-y-3",children:[l.class.schedule&&(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(O.A,{className:"h-4 w-4 text-gray-500"}),(0,a.jsx)("span",{className:"text-sm text-gray-600",children:l.class.schedule})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(A.A,{className:"h-4 w-4 text-gray-500"}),(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:["Teacher: ",l.class.teacher.name]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(v.A,{className:"h-4 w-4 text-gray-500"}),(0,a.jsx)("span",{className:"text-sm text-gray-600",children:l.class.teacher.email})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Description"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:l.class.description||"No description provided."})]})]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,a.jsx)("div",{className:"card-cmu p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(O.A,{className:"h-8 w-8 text-cmu-maroon"}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Total Sessions"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-cmu-maroon",children:l.statistics.totalSessions})]})]})}),(0,a.jsx)("div",{className:"card-cmu p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(n.A,{className:"h-8 w-8 text-cmu-gold"}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Total Attendance"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-cmu-gold-dark",children:l.statistics.totalAttendanceRecords})]})]})}),(0,a.jsx)("div",{className:"card-cmu p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(j.A,{className:"h-8 w-8 text-cmu-maroon-light"}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Enrolled Students"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-cmu-maroon-light",children:l.statistics.totalEnrolledStudents})]})]})}),(0,a.jsx)("div",{className:"card-cmu p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(m.A,{className:"h-8 w-8 text-cmu-gold-dark"}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Avg. Attendance"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-cmu-gold-dark",children:l.statistics.averageAttendancePerSession})]})]})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,a.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(U.A,{className:"h-5 w-5 text-red-500"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Flagged Students"}),h.length>0&&(0,a.jsx)("span",{className:"bg-red-500 text-white text-xs rounded-full px-2 py-1 min-w-[20px] text-center",children:h.length})]}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Students flagged in this class only"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[p&&(0,a.jsx)("button",{onClick:b,className:"text-sm px-2 py-1 rounded-md bg-gray-100 text-gray-700 hover:bg-gray-200 transition-colors",title:"Refresh flagged students",children:(0,a.jsx)(_.A,{className:"h-4 w-4"})}),(0,a.jsx)("button",{onClick:()=>{f(!p),p||b()},className:"text-sm px-3 py-1 rounded-md transition-colors ".concat(p?"bg-red-100 text-red-700":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:p?"Hide":"Show"})]})]})}),p&&(0,a.jsx)("div",{className:"p-6",children:0===h.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(j.A,{className:"h-12 w-12 text-gray-300 mx-auto mb-3"}),(0,a.jsx)("p",{className:"text-gray-500",children:"No flagged students in this class"}),(0,a.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:"Students will appear here after 3 suspicious attendance attempts in this class"})]}):(0,a.jsx)("div",{className:"space-y-4",children:h.map((e,s)=>(0,a.jsx)("div",{className:"border border-red-200 rounded-lg p-4 bg-red-50",children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("div",{className:"w-10 h-10 bg-red-100 rounded-full flex items-center justify-center",children:(0,a.jsx)(j.A,{className:"h-5 w-5 text-red-600"})})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:e.studentName}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:e.studentEmail}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[(0,a.jsxs)("span",{children:["Attempts: ",(0,a.jsx)("strong",{children:e.attemptCount||e.reasons.length})]}),(0,a.jsx)("span",{children:"•"}),(0,a.jsx)("span",{className:"font-medium text-red-600",children:"Suspicious Activity"})]})]})]}),(0,a.jsxs)("div",{className:"mt-3",children:[(0,a.jsx)("div",{className:"flex flex-wrap gap-2 mb-3",children:e.reasons.map((e,s)=>(0,a.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:e},s))}),(0,a.jsxs)("button",{onClick:()=>{let s=h.findIndex(s=>s.id===e.id),t=[...h];t[s]={...t[s],showDetails:!t[s].showDetails},g(t)},className:"flex items-center space-x-1 text-sm text-red-600 hover:text-red-700 transition-colors",children:[(0,a.jsx)("span",{children:"View Details"}),(0,a.jsx)("svg",{className:"w-4 h-4 transition-transform ".concat(e.showDetails?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),e.showDetails&&e.notes&&(0,a.jsx)("div",{className:"mt-2 p-3 bg-red-50 border border-red-200 rounded-md",children:(0,a.jsx)("p",{className:"text-xs text-red-700",children:e.notes})})]})]}),(0,a.jsxs)("div",{className:"flex-shrink-0 text-right",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-1 text-sm text-gray-500 mb-2",children:[(0,a.jsx)(d.A,{className:"h-4 w-4"}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("div",{className:"font-medium",children:new Date(e.flaggedAt).toLocaleDateString()}),(0,a.jsx)("div",{className:"text-xs",children:new Date(e.flaggedAt).toLocaleTimeString()}),(0,a.jsx)("div",{className:"text-xs text-gray-400 italic",children:(e=>{let s=new Date,t=new Date(e),a=Math.floor((s.getTime()-t.getTime())/1e3);if(a<60)return"Just now";if(a<3600){let e=Math.floor(a/60);return"".concat(e," minute").concat(e>1?"s":""," ago")}if(a<86400){let e=Math.floor(a/3600);return"".concat(e," hour").concat(e>1?"s":""," ago")}{let e=Math.floor(a/86400);return"".concat(e," day").concat(e>1?"s":""," ago")}})(e.flaggedAt)})]})]}),(0,a.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat("pending"===e.status?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"),children:e.status})]})]})},s))})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,a.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Recent Sessions"})}),(0,a.jsx)("div",{className:"p-6",children:0===l.recentSessions.length?(0,a.jsx)("p",{className:"text-gray-500 text-center py-4",children:"No sessions created yet."}):(0,a.jsx)("div",{className:"space-y-3",children:l.recentSessions.map(e=>(0,a.jsx)("div",{className:"border border-gray-200 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-sm font-medium text-gray-900",children:["OTP: ",(0,a.jsx)("span",{className:"font-mono",children:e.otp})]}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:new Date(e.createdAt).toLocaleString()})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("p",{className:"text-sm font-medium text-green-600",children:[e.attendanceCount," attended"]}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:["Valid until: ",new Date(e.validUntil).toLocaleString()]})]})]})},e.id))})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,a.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Enrolled Students"})}),(0,a.jsx)("div",{className:"p-6",children:0===l.enrolledStudents.length?(0,a.jsx)("p",{className:"text-gray-500 text-center py-4",children:"No students enrolled yet."}):(0,a.jsx)("div",{className:"space-y-3",children:l.enrolledStudents.map(e=>{let s=l.studentAttendanceStats.find(s=>s.student.id===e.id);return(0,a.jsx)("div",{className:"border border-gray-200 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:e.email})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("p",{className:"text-sm font-medium text-blue-600",children:[(null==s?void 0:s.totalAttendance)||0," sessions"]}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:[s?"".concat(Math.round(s.attendanceRate),"%"):"0%"," rate"]})]})]})},e.id)})})})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,a.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Recent Attendance Records"})}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Session OTP"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Attendance Time"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:0===l.recentAttendanceRecords.length?(0,a.jsx)("tr",{children:(0,a.jsxs)("td",{colSpan:4,className:"px-6 py-8 text-center text-gray-500",children:[(0,a.jsx)(n.A,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),(0,a.jsx)("p",{className:"text-lg font-medium",children:"No attendance records yet"}),(0,a.jsx)("p",{className:"text-sm",children:"Attendance records will appear here once students mark their attendance."})]})}):l.recentAttendanceRecords.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.student.name}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:e.student.email})]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-mono",children:e.session.otp}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(e.timestamp).toLocaleString()}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[(0,a.jsx)(n.A,{className:"h-3 w-3 mr-1"}),"Present"]})})]},e.id))})]})})]})]}):null}var Y=t(6197),W=t(2682),q=t(2574);function H(e){let{message:s,type:t,onDismiss:r}=e,l=(()=>{switch(t){case"success":return{container:"bg-green-50 border-green-200 text-green-800",icon:n.A,iconColor:"text-green-600"};case"error":return{container:"bg-red-50 border-red-200 text-red-800",icon:Y.A,iconColor:"text-red-600"};case"warning":return{container:"bg-yellow-50 border-yellow-200 text-yellow-800",icon:U.A,iconColor:"text-yellow-600"};case"info":return{container:"bg-blue-50 border-blue-200 text-blue-800",icon:W.A,iconColor:"text-blue-600"};default:return{container:"bg-gray-50 border-gray-200 text-gray-800",icon:W.A,iconColor:"text-gray-600"}}})(),i=l.icon;return(0,a.jsxs)("div",{className:"border rounded-lg px-4 py-3 flex items-start space-x-3 ".concat(l.container),children:[(0,a.jsx)(i,{className:"h-5 w-5 mt-0.5 ".concat(l.iconColor)}),(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsx)("p",{className:"text-sm font-medium",children:s})}),r&&(0,a.jsx)("button",{onClick:r,className:"flex-shrink-0 ".concat(l.iconColor," hover:opacity-75 transition-opacity"),children:(0,a.jsx)(q.A,{className:"h-4 w-4"})})]})}var K=t(9856);function J(e){let{initialLat:s,initialLng:t,onLocationSelect:l,onMapReady:n}=e,[i,o]=(0,r.useState)(null),[c,d]=(0,r.useState)(null),[m,x]=(0,r.useState)(null),[u,h]=(0,r.useState)(null),g=(0,r.useCallback)(e=>{if(null!==e&&0!==s&&0!==t){let a=()=>{var r;if(null==(r=window.google)?void 0:r.maps)try{console.log("Initializing Google Map with coordinates:",s,t);let a=new window.google.maps.Map(e,{center:{lat:s,lng:t},zoom:20,mapTypeId:window.google.maps.MapTypeId.SATELLITE,mapTypeControl:!0,streetViewControl:!0,fullscreenControl:!0,zoomControl:!0,clickableIcons:!1}),r=new window.google.maps.Marker({position:{lat:s,lng:t},map:a,draggable:!0,title:"Classroom Location"});a.addListener("click",e=>{if(e.latLng){let s=e.latLng.lat(),t=e.latLng.lng();r.setPosition({lat:s,lng:t}),l(s,t)}}),r.addListener("dragend",()=>{let e=r.getPosition();if(e){let s=e.lat(),t=e.lng();l(s,t)}}),o(a),d(r),console.log("Google Map initialized successfully"),n&&n(a),navigator.geolocation?navigator.geolocation.getCurrentPosition(e=>{let s=e.coords.latitude,t=e.coords.longitude,r=e.coords.accuracy;console.log("User location found:",s,t,"Accuracy:",r,"meters"),h({lat:s,lng:t});let l=new window.google.maps.Marker({position:{lat:s,lng:t},map:a,title:"Your Location (Accuracy: ".concat(Math.round(r),"m)"),icon:{path:window.google.maps.SymbolPath.CIRCLE,scale:8,fillColor:"#4285F4",fillOpacity:1,strokeColor:"#FFFFFF",strokeWeight:3},zIndex:1e3}),n=new window.google.maps.Circle({center:{lat:s,lng:t},radius:r,map:a,fillColor:"#4285F4",fillOpacity:.1,strokeColor:"#4285F4",strokeOpacity:.3,strokeWeight:1,zIndex:999});x(l),l.accuracyCircle=n},e=>{console.warn("Geolocation error:",e.message)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5}):console.warn("Geolocation is not supported by this browser")}catch(e){console.error("Error creating map:",e)}else setTimeout(a,100)};a()}},[s,t,l]);return(0,r.useEffect)(()=>{if(i&&c&&0!==s&&0!==t){let e={lat:s,lng:t};i.setCenter(e),c.setPosition(e)}},[i,c,s,t]),(0,a.jsx)("div",{ref:g,style:{height:"100%",width:"100%"}})}function X(){return(0,a.jsx)("div",{className:"flex items-center justify-center h-96 bg-gray-100",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Loading Google Maps..."})]})})}function Z(e){let{onRetry:s,onUseFallback:t}=e;return(0,a.jsx)("div",{className:"flex items-center justify-center h-96 bg-red-50",children:(0,a.jsxs)("div",{className:"text-center max-w-md",children:[(0,a.jsx)("p",{className:"text-sm text-red-600 mb-2",children:"Failed to load Google Maps"}),(0,a.jsxs)("p",{className:"text-xs text-red-500 mb-4",children:["This could be due to:",(0,a.jsx)("br",{}),"• API key not configured",(0,a.jsx)("br",{}),"• Maps JavaScript API not enabled",(0,a.jsx)("br",{}),"• Billing not set up",(0,a.jsx)("br",{}),"• API key restrictions"]}),(0,a.jsxs)("div",{className:"space-y-2",children:[s&&(0,a.jsx)("button",{onClick:s,className:"px-3 py-1 text-xs bg-blue-600 text-white rounded hover:bg-blue-700",children:"Retry"}),t&&(0,a.jsx)("button",{onClick:t,className:"px-3 py-1 text-xs bg-gray-600 text-white rounded hover:bg-gray-700 ml-2",children:"Use Manual Entry"})]})]})})}function $(e){let{initialLat:s,initialLng:t,onLocationSelect:l,onClose:n}=e,[i,o]=(0,r.useState)([0,0]),[c,d]=(0,r.useState)(""),[m,x]=(0,r.useState)(!0),[u,h]=(0,r.useState)(""),[g,p]=(0,r.useState)(null),[j,f]=(0,r.useState)(null);(0,r.useEffect)(()=>{let e="your_google_maps_api_key_here";console.log("Google Maps API Key loaded:",e?"Yes":"No"),d(e)},[]),(0,r.useEffect)(()=>{var e,a;let r=async()=>{if(!c)return void x(!1);try{let r=s,l=t;if(!r||!l){var e,a;if(null==(a=window.google)||null==(e=a.maps)?void 0:e.Geocoder)try{let e=new window.google.maps.Geocoder,s=await new Promise((s,t)=>{e.geocode({address:"Central Michigan University, Mount Pleasant, MI"},(e,a)=>{"OK"===a&&e?s(e):t(Error("Geocoding failed: ".concat(a)))})});if(s.length>0){let e=s[0].geometry.location;r=e.lat(),l=e.lng()}else r=43.5842,l=-84.7674}catch(e){console.warn("Geocoding failed, using fallback coordinates:",e),r=43.5842,l=-84.7674}else r=43.5842,l=-84.7674}o([r||43.5842,l||-84.7674]),x(!1)}catch(e){console.error("Error initializing location:",e),h("Failed to load location"),o([43.5842,-84.7674]),x(!1)}};if(c&&(null==(a=window.google)||null==(e=a.maps)?void 0:e.Geocoder))r();else if(c){let e=setInterval(()=>{var s,t;(null==(t=window.google)||null==(s=t.maps)?void 0:s.Geocoder)&&(clearInterval(e),r())},100),s=setTimeout(()=>{clearInterval(e),h("Google Maps API failed to load"),x(!1)},1e4);return()=>{clearInterval(e),clearTimeout(s)}}else x(!1)},[c,s,t]);let y=(e,s)=>{o([e,s]),l(e,s)},b=()=>{l(i[0],i[1]),n()},N=()=>{x(!0),h(""),window.location.reload()},v=()=>{b()},w=()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(e=>{let s=e.coords.latitude,t=e.coords.longitude;console.log("User location found:",s,t,"Accuracy:",e.coords.accuracy,"meters"),f({lat:s,lng:t}),o([s,t]),y(s,t),g&&(g.setCenter({lat:s,lng:t}),g.setZoom(20))},e=>{console.warn("Geolocation error:",e.message),alert("Unable to get your location. Please allow location access or select manually.")},{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5}):alert("Geolocation is not supported by this browser")};return c?(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg max-w-6xl w-full mx-4 max-h-[90vh] overflow-hidden",children:[(0,a.jsx)("div",{className:"px-6 py-4 border-b border-gray-200 bg-gray-50",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Select Classroom Location"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Click anywhere on the map or drag the marker to select the precise location of your classroom"})]}),(0,a.jsx)("button",{onClick:n,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,a.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,a.jsxs)("div",{className:"h-96 w-full relative",children:[(0,a.jsx)(K.Wrapper,{apiKey:c,render:e=>{if(console.log("Google Maps Wrapper Status:",e),m)return(0,a.jsx)(X,{});if(u)return(0,a.jsx)(Z,{onRetry:N,onUseFallback:v});switch(e){case K.Status.LOADING:return(0,a.jsx)(X,{});case K.Status.FAILURE:return console.error("Google Maps Wrapper failed to load"),(0,a.jsx)(Z,{onRetry:N,onUseFallback:v});case K.Status.SUCCESS:return(0,a.jsx)(J,{initialLat:i[0],initialLng:i[1],onLocationSelect:y,onMapReady:p});default:return(0,a.jsx)(X,{})}},libraries:["places","geocoding"]}),(0,a.jsxs)("div",{className:"absolute top-4 right-4 z-10 space-y-2",children:[(0,a.jsx)("button",{onClick:w,className:"bg-white hover:bg-gray-50 text-gray-700 p-2 rounded-full shadow-lg border border-gray-300 transition-colors",title:"Get my current location",children:(0,a.jsxs)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})}),j&&(0,a.jsx)("div",{className:"bg-white p-2 rounded-lg shadow-lg border border-gray-300 text-xs",children:(0,a.jsxs)("div",{className:"flex items-center space-x-1 text-green-600",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),(0,a.jsx)("span",{children:"Location found"})]})})]})]}),(0,a.jsx)("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Selected Coordinates:"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Latitude"}),(0,a.jsx)("input",{type:"number",step:"any",value:i[0].toFixed(6),onChange:e=>{let s=parseFloat(e.target.value);isNaN(s)||(o([s,i[1]]),y(s,i[1]))},className:"w-full px-3 py-2 text-sm font-mono border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Longitude"}),(0,a.jsx)("input",{type:"number",step:"any",value:i[1].toFixed(6),onChange:e=>{let s=parseFloat(e.target.value);isNaN(s)||(o([i[0],s]),y(i[0],s))},className:"w-full px-3 py-2 text-sm font-mono border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),(0,a.jsxs)("div",{className:"mt-2 space-y-1",children:[(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"\uD83D\uDDFA️ Click on the map or drag the marker to select location, or manually enter precise coordinates above"}),(0,a.jsx)("p",{className:"text-xs text-green-600 font-medium",children:"\uD83C\uDFAF Google Maps Precision: ~0.1 meter accuracy with satellite imagery"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 mt-2",children:[(0,a.jsxs)("button",{onClick:w,className:"flex items-center space-x-1 px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded hover:bg-blue-200 transition-colors",children:[(0,a.jsxs)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),(0,a.jsx)("span",{children:"Use My Location"})]}),j&&(0,a.jsxs)("span",{className:"text-xs text-green-600",children:["✓ Location found: ",j.lat.toFixed(6),", ",j.lng.toFixed(6)]})]})]})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,a.jsx)("button",{onClick:n,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancel"}),(0,a.jsx)("button",{onClick:b,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Confirm Location"})]})]})})]})}):(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsx)("div",{className:"bg-white rounded-lg max-w-md w-full mx-4 p-6",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Google Maps API Key Required"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"To use Google Maps for precise location selection, you need to configure a Google Maps API key."}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("button",{onClick:n,className:"w-full px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Use CMU Building Picker Instead"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Or configure NEXT_PUBLIC_GOOGLE_MAPS_API_KEY in your environment"})]})]})})})}function ee(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{timeout:s=5e3,onDismiss:t}=e,[a,l]=(0,r.useState)(null),n=()=>{l(null),null==t||t()};return(0,r.useEffect)(()=>{if(a){let e=setTimeout(()=>{n()},s);return()=>clearTimeout(e)}},[a,s]),{alert:a,showAlert:function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"error";l({message:e,type:s,id:Date.now().toString()})},dismissAlert:n}}async function es(e){if(!window.google||!window.google.maps||!window.google.maps.Geocoder)throw Error("Google Maps API not loaded or Geocoder not available");let s=new window.google.maps.Geocoder;return new Promise((t,a)=>{s.geocode({address:e},(e,s)=>{if("OK"===s&&e&&e.length>0){let s=e[0].geometry.location;t({lat:s.lat(),lng:s.lng(),address:e[0].formatted_address})}else a(Error("Geocoding failed: ".concat(s)))})})}let et={"Engineering Building":{latitude:43.5842,longitude:-84.7674,address:"Engineering Building, Central Michigan University, Mount Pleasant, MI",rooms:["Room 101","Room 102","Room 201","Room 202","Room 301","Room 302"]},"Business Building":{latitude:43.585,longitude:-84.768,address:"Business Building, Central Michigan University, Mount Pleasant, MI",rooms:["MBA 610","MBA 620","MBA 630","Room 101","Room 102","Room 201"]},Library:{latitude:43.5835,longitude:-84.767,address:"Charles V. Park Library, Central Michigan University, Mount Pleasant, MI",rooms:["Study Room A","Study Room B","Conference Room 1","Conference Room 2"]},"Student Center":{latitude:43.584,longitude:-84.7665,address:"Bovee University Center, Central Michigan University, Mount Pleasant, MI",rooms:["Meeting Room 1","Meeting Room 2","Conference Room A","Conference Room B"]},"Grawn Hall":{latitude:43.593,longitude:-84.7761,address:"Grawn Hall, Central Michigan University, Mount Pleasant, MI",rooms:["Room 101","Room 102","Room 201","Room 202","Room 301"]}},ea=b.Ik({name:b.Yj().min(1,"Class name is required"),description:b.Yj().optional(),subject:b.Yj().min(1,"Subject is required"),schedule:b.Yj().min(1,"Schedule is required"),latitude:b.ai().optional(),longitude:b.ai().optional(),locationRadius:b.ai().min(10).max(200).optional()});function er(){var e,s;let[t,l]=(0,r.useState)([]),[n,i]=(0,r.useState)(!0),[o,c]=(0,r.useState)(!1),[m,x]=(0,r.useState)(null),{alert:u,showAlert:h,dismissAlert:g}=ee({timeout:6e3}),[b,N]=(0,r.useState)(null),[v,w]=(0,r.useState)(!1),[k,A]=(0,r.useState)(!1),[C,M]=(0,r.useState)(""),[F,L]=(0,r.useState)(""),[R,D]=(0,r.useState)([]),[E,I]=(0,r.useState)(!1),T=(0,f.mN)({resolver:(0,y.u)(ea)});(0,r.useEffect)(()=>{_(),Y()},[]);let _=async()=>{try{console.log("Fetching classes with token:",localStorage.getItem("token"));let e=await P.get("/classes");console.log("Classes response:",e.data),l(e.data)}catch(t){var e,s;console.error("Error fetching classes:",t),console.error("Error response:",t.response),h((null==(s=t.response)||null==(e=s.data)?void 0:e.message)||"Failed to fetch classes","error")}finally{i(!1)}},Y=async()=>{try{let e=await P.get("/attendance/flagged-students");D(e.data)}catch(e){console.error("Error fetching flagged students:",e),h("Failed to fetch flagged students","error")}},W=R.reduce((e,s)=>{let t=s.className;return e[t]||(e[t]=[]),e[t].push(s),e},{}),q=async e=>{try{m?await P.patch("/classes/".concat(m.id),e):await P.post("/classes",e),c(!1),x(null),T.reset(),_(),h(m?"Class updated successfully!":"Class created successfully!","success")}catch(e){var s,t;h((null==(t=e.response)||null==(s=t.data)?void 0:s.message)||"Failed to save class","error")}},K=async e=>{if(confirm("Are you sure you want to delete this class?"))try{await P.delete("/classes/".concat(e)),_(),h("Class deleted successfully!","success")}catch(e){var s,t;h((null==(t=e.response)||null==(s=t.data)?void 0:s.message)||"Failed to delete class","error")}},J=async e=>{M(e),L("");try{let s=await es("".concat(e,", Central Michigan University, Mount Pleasant, MI"));if(s)T.setValue("latitude",s.lat),T.setValue("longitude",s.lng);else{let s=et[e];s&&(T.setValue("latitude",s.latitude),T.setValue("longitude",s.longitude))}}catch(t){console.error("Geocoding failed, using fallback coordinates:",t);let s=et[e];s&&(T.setValue("latitude",s.latitude),T.setValue("longitude",s.longitude))}};return n?(0,a.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-cmu-maroon"})}):b?(0,a.jsx)(Q,{classId:b,onBack:()=>N(null)}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-3xl font-bold text-cmu-maroon",children:"Classes"}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"Manage your courses and track attendance"})]}),(0,a.jsxs)("div",{className:"flex space-x-3",children:[(0,a.jsxs)("button",{onClick:()=>{I(!E),E||Y()},className:"flex items-center space-x-2 px-4 py-2 rounded-lg font-medium transition-colors ".concat(E?"bg-red-100 text-red-700 border border-red-300":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50"),children:[(0,a.jsx)(U.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Flagged Students"}),R.length>0&&(0,a.jsx)("span",{className:"bg-red-500 text-white text-xs rounded-full px-2 py-1 min-w-[20px] text-center",children:R.length})]}),(0,a.jsxs)("button",{onClick:()=>c(!0),className:"btn-cmu-primary flex items-center space-x-2",children:[(0,a.jsx)(G.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Add Class"})]})]})]}),E&&(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-4",children:[(0,a.jsx)(U.A,{className:"h-5 w-5 text-red-500"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Flagged Students"})]}),0===R.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(j.A,{className:"h-12 w-12 text-gray-300 mx-auto mb-3"}),(0,a.jsx)("p",{className:"text-gray-500",children:"No flagged students at this time"}),(0,a.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:"Students will appear here after 3 suspicious attendance attempts"})]}):(0,a.jsx)("div",{className:"space-y-6",children:Object.entries(W).map(e=>{let[s,t]=e;return(0,a.jsxs)("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[(0,a.jsx)("div",{className:"bg-gray-50 px-4 py-3 border-b border-gray-200",children:(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(p.A,{className:"h-5 w-5 text-gray-600"}),(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:s}),(0,a.jsxs)("span",{className:"bg-red-100 text-red-800 text-xs font-medium px-2 py-1 rounded-full",children:[t.length," flagged"]})]})})}),(0,a.jsx)("div",{className:"p-4 space-y-3",children:t.map((e,s)=>(0,a.jsx)("div",{className:"border border-red-200 rounded-lg p-4 bg-red-50",children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("div",{className:"w-10 h-10 bg-red-100 rounded-full flex items-center justify-center",children:(0,a.jsx)(j.A,{className:"h-5 w-5 text-red-600"})})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h5",{className:"font-medium text-gray-900",children:e.studentName}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:e.studentEmail}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-500 mt-1",children:[(0,a.jsxs)("span",{children:["Attempts: ",(0,a.jsx)("strong",{children:e.attemptCount||e.reasons.length})]}),(0,a.jsx)("span",{children:"•"}),(0,a.jsx)("span",{className:"font-medium text-red-600",children:"Suspicious Activity"})]})]})]}),(0,a.jsxs)("div",{className:"mt-3",children:[(0,a.jsx)("div",{className:"flex flex-wrap gap-2 mb-3",children:e.reasons.map((e,s)=>(0,a.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:e},s))}),(0,a.jsxs)("button",{onClick:()=>{let s=R.findIndex(s=>s.id===e.id),t=[...R];t[s]={...t[s],showDetails:!t[s].showDetails},D(t)},className:"flex items-center space-x-1 text-sm text-red-600 hover:text-red-700 transition-colors",children:[(0,a.jsx)("span",{children:"View Details"}),(0,a.jsx)("svg",{className:"w-4 h-4 transition-transform ".concat(e.showDetails?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),e.showDetails&&e.notes&&(0,a.jsx)("div",{className:"mt-2 p-3 bg-red-50 border border-red-200 rounded-md",children:(0,a.jsx)("p",{className:"text-xs text-red-700",children:e.notes})})]})]}),(0,a.jsxs)("div",{className:"flex-shrink-0 text-right",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-1 text-sm text-gray-500 mb-2",children:[(0,a.jsx)(d.A,{className:"h-4 w-4"}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("div",{className:"font-medium",children:new Date(e.flaggedAt).toLocaleDateString()}),(0,a.jsx)("div",{className:"text-xs",children:new Date(e.flaggedAt).toLocaleTimeString()})]})]}),(0,a.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat("pending"===e.status?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"),children:e.status})]})]})},"".concat(e.id,"-").concat(s)))})]},s)})})]}),u&&(0,a.jsx)(H,{message:u.message,type:u.type,onDismiss:g}),o&&(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:m?"Edit Class":"Create New Class"}),(0,a.jsxs)("form",{onSubmit:T.handleSubmit(q),className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Class Name"}),(0,a.jsx)("input",{...T.register("name"),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-cmu-maroon focus:border-cmu-maroon",placeholder:"e.g., Math 101"}),T.formState.errors.name&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:T.formState.errors.name.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Subject"}),(0,a.jsx)("input",{...T.register("subject"),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-cmu-maroon focus:border-cmu-maroon",placeholder:"e.g., Mathematics"}),T.formState.errors.subject&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:T.formState.errors.subject.message})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Schedule"}),(0,a.jsx)("input",{...T.register("schedule"),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-cmu-maroon focus:border-cmu-maroon",placeholder:"e.g., Monday, Wednesday, Friday 9:00 AM - 10:30 AM"}),T.formState.errors.schedule&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:T.formState.errors.schedule.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Description (Optional)"}),(0,a.jsx)("textarea",{...T.register("description"),rows:3,className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-cmu-maroon focus:border-cmu-maroon",placeholder:"Brief description of the class"})]}),(0,a.jsxs)("div",{className:"border-t-0.5 pt-4",children:[(0,a.jsx)("h4",{className:"text-md font-medium text-gray-900 mb-3",children:"Location Settings (Optional)"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Set classroom coordinates to enable location-based attendance verification"}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("div",{className:"flex space-x-3 mb-3",children:(0,a.jsxs)("button",{type:"button",onClick:()=>A(!0),className:"flex items-center space-x-2 px-4 py-2 bg-cmu-maroon text-white rounded-lg hover:bg-blue-700 transition-all duration-200 shadow-sm font-medium",children:[(0,a.jsx)(B.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:m&&m.latitude&&m.longitude?"Update with Google Maps":"Select with Google Maps"})]})}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"\uD83C\uDFDB️ Choose from CMU buildings for quick setup, or \uD83D\uDDFA️ select precise coordinates with Google Maps"}),m&&m.latitude&&m.longitude&&(0,a.jsxs)("p",{className:"text-xs text-cmu-maroon mt-1 font-medium",children:["\uD83D\uDCCD Current: ",m.latitude.toFixed(6),", ",m.longitude.toFixed(6),m.locationRadius&&" (".concat(m.locationRadius,"m radius)")]})]}),v&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg max-w-2xl w-full mx-4 max-h-96 overflow-y-auto",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Select CMU Building & Room"}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Building"}),(0,a.jsx)("div",{className:"grid grid-cols-1 gap-2",children:Object.keys(et).map(e=>(0,a.jsxs)("button",{onClick:()=>J(e),className:"p-3 text-left rounded-lg border transition-all duration-200 ".concat(C===e?"border-cmu-maroon bg-cmu-maroon text-white":"border-gray-300 hover:border-cmu-maroon hover:bg-gray-50"),children:[(0,a.jsx)("div",{className:"font-medium",children:e}),(0,a.jsx)("div",{className:"text-sm opacity-75",children:et[e].address})]},e))})]}),C&&(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Room (Optional)"}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-2",children:et[C].rooms.map(e=>(0,a.jsx)("button",{onClick:()=>(e=>{L(e);let s=et[C];s&&(T.setValue("latitude",s.latitude+1e-4),T.setValue("longitude",s.longitude+1e-4))})(e),className:"p-2 text-sm rounded-lg border transition-all duration-200 ".concat(F===e?"border-cmu-gold-dark bg-cmu-gold-dark text-white":"border-gray-300 hover:border-cmu-gold-dark hover:bg-gray-50"),children:e},e))})]}),C&&(0,a.jsxs)("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:"Selected Location:"}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:[C," ",F&&"- ".concat(F)]}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:["Coordinates: ",null==(e=T.watch("latitude"))?void 0:e.toFixed(6),", ",null==(s=T.watch("longitude"))?void 0:s.toFixed(6)]})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,a.jsx)("button",{onClick:()=>w(!1),className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Cancel"}),(0,a.jsx)("button",{onClick:()=>w(!1),className:"px-4 py-2 bg-cmu-maroon text-white rounded-md hover:bg-cmu-maroon-dark",children:"Confirm Location"})]})]})}),k&&(0,a.jsx)($,{initialLat:null==m?void 0:m.latitude,initialLng:null==m?void 0:m.longitude,onLocationSelect:(e,s)=>{T.setValue("latitude",e),T.setValue("longitude",s),M(""),L("")},onClose:()=>A(!1)}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Latitude"}),(0,a.jsx)("input",{...T.register("latitude",{valueAsNumber:!0}),type:"number",step:"any",className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-cmu-maroon focus:border-cmu-maroon font-mono text-sm",placeholder:"43.584200"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"6 decimal places (~0.1m precision)"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Longitude"}),(0,a.jsx)("input",{...T.register("longitude",{valueAsNumber:!0}),type:"number",step:"any",className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-cmu-maroon focus:border-cmu-maroon font-mono text-sm",placeholder:"-84.767400"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"6 decimal places (~0.1m precision)"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Radius (meters)"}),(0,a.jsx)("input",{...T.register("locationRadius",{valueAsNumber:!0}),type:"number",min:"10",max:"200",className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-cmu-maroon focus:border-cmu-maroon",placeholder:"50"})]})]}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"\uD83D\uDCA1 Tip: Use the CMU Building selector above for automatic setup, or enter coordinates manually. Students must be within this radius to mark attendance."}),(0,a.jsxs)("div",{className:"mt-3 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-yellow-900 mb-2",children:"\uD83D\uDD27 Troubleshooting Location Issues"}),(0,a.jsxs)("ul",{className:"text-xs text-yellow-800 space-y-1",children:[(0,a.jsx)("li",{children:'• If students get "Too far from class" errors, check if coordinates are accurate'}),(0,a.jsx)("li",{children:"• Consider increasing the radius for larger classrooms (up to 200m)"}),(0,a.jsx)("li",{children:"• Verify the classroom location using Google Maps"}),(0,a.jsx)("li",{children:"• Test location verification from the actual classroom"})]})]})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,a.jsx)("button",{type:"button",onClick:()=>{c(!1),x(null),T.reset(),w(!1),A(!1),M(""),L("")},className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",className:"btn-cmu-primary",children:m?"Update Class":"Create Class"})]})]})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(e=>(0,a.jsxs)("div",{className:"card-cmu p-6 flex flex-col",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:e.name}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.subject}),e.description&&(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:e.description}),(0,a.jsxs)("div",{className:"mt-4 space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center text-sm text-gray-500",children:[(0,a.jsx)(O.A,{className:"h-4 w-4 mr-2"}),(0,a.jsx)("span",{children:e.schedule})]}),e.sessions&&e.sessions.length>0&&(0,a.jsxs)("div",{className:"mt-3",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Active Session:"}),(0,a.jsx)("div",{className:"text-xs bg-gray-50 px-2 py-1 rounded",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("span",{className:"font-mono",children:["OTP: ",e.sessions[0].otp]}),(0,a.jsxs)("span",{className:"text-gray-500",children:["Valid until: ",new Date(e.sessions[0].validUntil).toLocaleString()]})]})})]})]})]}),(0,a.jsx)("div",{className:"mt-6 pt-4 border-t border-gray-200",children:(0,a.jsxs)("div",{className:"flex justify-center space-x-3",children:[(0,a.jsxs)("button",{onClick:s=>{s.stopPropagation(),N(e.id)},className:"flex items-center space-x-2 px-4 py-2 text-cmu-maroon hover:bg-cmu-maroon hover:text-white rounded-lg transition-all duration-200 shadow-sm border border-cmu-maroon",title:"View Details",children:[(0,a.jsx)(S.A,{className:"h-4 w-4 hover:text-white"}),(0,a.jsx)("span",{className:"text-sm font-medium hover:text-white",children:"View"})]}),(0,a.jsxs)("button",{onClick:s=>{s.stopPropagation(),x(e),T.reset({name:e.name,description:e.description||"",subject:e.subject,schedule:e.schedule,latitude:e.latitude||void 0,longitude:e.longitude||void 0,locationRadius:e.locationRadius||void 0}),c(!0)},className:"flex items-center space-x-2 px-4 py-2 text-cmu-gold-dark hover:bg-cmu-gold hover:text-cmu-maroon rounded-lg transition-all duration-200 shadow-sm border border-cmu-gold-dark",title:"Edit Class",children:[(0,a.jsx)(z.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"Edit"})]}),(0,a.jsxs)("button",{onClick:s=>{s.stopPropagation(),K(e.id)},className:"flex items-center space-x-2 px-4 py-2 text-red-600 hover:bg-red-600 hover:text-white rounded-lg transition-all duration-200 shadow-sm border border-red-600",title:"Delete Class",children:[(0,a.jsx)(V.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"Delete"})]})]})})]},e.id))}),0===t.length&&!n&&(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(p.A,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,a.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No classes"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Get started by creating a new class."})]})]})}var el=t(9323),en=t(1071);let ei=b.Ik({classId:b.Yj().min(1,"Please select a class"),duration:b.ai().min(5).max(120)});function eo(){let[e,s]=(0,r.useState)([]),[t,l]=(0,r.useState)([]),[i,c]=(0,r.useState)([]),[m,x]=(0,r.useState)(""),[u,h]=(0,r.useState)(""),[g,p]=(0,r.useState)(!1),[b,N]=(0,r.useState)(!1),[v,w]=(0,r.useState)(!0),{alert:k,showAlert:S,dismissAlert:A}=ee({timeout:6e3}),[,C]=(0,r.useState)(""),[M,F]=(0,r.useState)(null),L=(0,f.mN)({resolver:(0,y.u)(ei)});(0,r.useEffect)(()=>{R(),D(),E()},[]);let R=async()=>{try{let e=await P.get("/classes");s(e.data)}catch(s){var e,t;S((null==(t=s.response)||null==(e=t.data)?void 0:e.message)||"Failed to fetch classes","error")}},D=async()=>{try{let e=await P.get("/sessions");l(e.data)}catch(t){var e,s;S((null==(s=t.response)||null==(e=s.data)?void 0:e.message)||"Failed to fetch sessions","error")}finally{w(!1)}},E=async()=>{try{let e=await P.get("/attendance");c(e.data)}catch(t){var e,s;S((null==(s=t.response)||null==(e=s.data)?void 0:e.message)||"Failed to fetch attendance records","error")}},I=async e=>{try{let s=(await P.post("/sessions",{classId:e.classId,duration:e.duration})).data;l(e=>[s,...e]),L.reset();let t=JSON.stringify({sessionId:s.id,otp:s.otp,classId:e.classId}),a=await en.toDataURL(t);h(a),p(!0),S("Session created successfully! QR code is ready.","success")}catch(e){var s,t;S((null==(t=e.response)||null==(s=t.data)?void 0:s.message)||"Failed to create session","error")}},T=async e=>{let s=JSON.stringify({sessionId:e.id,otp:e.otp,classId:e.class.id});h(await en.toDataURL(s)),p(!0)},U=async e=>{try{await P.post("/attendance/mark",{otp:e}),S("Attendance marked successfully!","success"),E()}catch(e){var s,t;S((null==(t=e.response)||null==(s=t.data)?void 0:s.message)||"Failed to mark attendance","error")}},B=async e=>{try{let s=await P.get("/attendance/session/".concat(e));F(s.data),N(!0)}catch(e){var s,t;S((null==(t=e.response)||null==(s=t.data)?void 0:s.message)||"Failed to fetch session attendance","error")}},O=m?t.filter(e=>e.class.id===m):t,z=m?i.filter(e=>{var s;return(null==(s=t.find(s=>s.id===e.sessionId))?void 0:s.class.id)===m}):i;return v?(0,a.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-3xl font-bold text-cmu-maroon",children:"Attendance Tracker"}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"Create sessions and monitor student attendance"})]}),(0,a.jsx)("div",{className:"flex space-x-4",children:(0,a.jsxs)("select",{value:m,onChange:e=>x(e.target.value),className:"border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-cmu-maroon focus:border-cmu-maroon",children:[(0,a.jsx)("option",{value:"",children:"All Classes"}),e.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.name," - ",e.subject]},e.id))]})})]}),k&&(0,a.jsx)(H,{message:k.message,type:k.type,onDismiss:A}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Create Attendance Session"}),(0,a.jsxs)("form",{onSubmit:L.handleSubmit(I),className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Class"}),(0,a.jsxs)("select",{...L.register("classId"),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-cmu-maroon focus:border-cmu-maroon",children:[(0,a.jsx)("option",{value:"",children:"Select a class"}),e.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.name," - ",e.subject]},e.id))]}),L.formState.errors.classId&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:L.formState.errors.classId.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Duration (minutes)"}),(0,a.jsx)("input",{...L.register("duration",{valueAsNumber:!0}),type:"number",min:"5",max:"120",defaultValue:"15",className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-cmu-maroon focus:border-cmu-maroon"}),L.formState.errors.duration&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:L.formState.errors.duration.message})]})]}),(0,a.jsxs)("button",{type:"submit",className:"btn-cmu-primary flex items-center space-x-2",children:[(0,a.jsx)(G.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Create Session"})]})]})]}),g&&u&&(0,a.jsx)("div",{className:"fixed inset-0 bg-gradient-to-br from-cmu-maroon-dark via-cmu-maroon to-cmu-gold-dark bg-opacity-90 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-gradient-to-br from-cmu-maroon to-cmu-maroon-dark p-6 rounded-lg max-w-md w-full mx-4 shadow-2xl",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-white mb-4 text-center",children:"Attendance QR Code"}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"bg-white p-4 rounded-lg mb-4",children:(0,a.jsx)("img",{src:u,alt:"QR Code",className:"mx-auto"})}),(0,a.jsx)("p",{className:"text-sm text-cmu-gold-light mb-4",children:"Students can scan this QR code to mark their attendance"}),(0,a.jsx)("button",{onClick:()=>p(!1),className:"bg-cmu-gold text-cmu-maroon px-6 py-2 rounded-lg hover:bg-cmu-gold-dark hover:text-white font-medium transition-all duration-200 shadow-sm",children:"Close"})]})]})}),b&&M&&(0,a.jsx)("div",{className:"fixed inset-0 bg-[#7700010f] bg-opacity-90 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-hidden shadow-2xl",children:[(0,a.jsx)("div",{className:"px-6 py-4 border-b border-gray-200 bg-cmu-maroon text-white",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"text-lg font-medium",children:"Session Attendance"}),(0,a.jsx)("button",{onClick:()=>{N(!1),F(null)},className:"text-white hover:text-cmu-gold-light transition-colors",children:(0,a.jsx)(el.A,{className:"h-6 w-6"})})]})}),(0,a.jsx)("div",{className:"overflow-y-auto max-h-[calc(90vh-80px)]",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"mb-6 p-4 bg-blue-50 rounded-lg",children:[(0,a.jsxs)("h4",{className:"text-lg font-medium text-blue-900 mb-2",children:[M.session.class.name,M.session.class.subject&&(0,a.jsxs)("span",{className:"text-blue-700",children:[" - ",M.session.class.subject]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-blue-800",children:"OTP:"}),(0,a.jsx)("span",{className:"ml-2 font-mono",children:M.session.otp})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-blue-800",children:"Total Attended:"}),(0,a.jsx)("span",{className:"ml-2 font-semibold",children:M.summary.totalAttended})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-blue-800",children:"Session Duration:"}),(0,a.jsxs)("span",{className:"ml-2",children:[new Date(M.session.createdAt).toLocaleString()," - ",new Date(M.session.validUntil).toLocaleString()]})]})]})]}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student Name"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Attendance Time"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:0===M.attendanceRecords.length?(0,a.jsx)("tr",{children:(0,a.jsxs)("td",{colSpan:4,className:"px-6 py-8 text-center text-gray-500",children:[(0,a.jsx)(j.A,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),(0,a.jsx)("p",{className:"text-lg font-medium",children:"No students have marked attendance yet"}),(0,a.jsx)("p",{className:"text-sm",children:"Share the OTP or QR code with your students"})]})}):M.attendanceRecords.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.student.name})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.student.email}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(e.timestamp).toLocaleString()}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[(0,a.jsx)(n.A,{className:"h-3 w-3 mr-1"}),"Present"]})})]},e.id))})]})})]})}),(0,a.jsx)("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50",children:(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsx)("button",{onClick:()=>{N(!1),F(null)},className:"bg-cmu-maroon text-white px-6 py-2 rounded-lg hover:bg-cmu-maroon-dark font-medium transition-all duration-200 shadow-sm",children:"Close"})})})]})}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,a.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Active Sessions"})}),(0,a.jsx)("div",{className:"divide-y divide-gray-100",children:O.map(e=>{let s=new Date(e.validUntil)>new Date;return(0,a.jsx)("div",{className:"p-6 ".concat(s?"":"bg-gray-50 border-l-4 border-gray-400"),children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("h4",{className:"text-lg font-medium ".concat(s?"text-gray-900":"text-gray-600"),children:e.class.name}),(0,a.jsxs)("span",{className:"text-sm ".concat(s?"text-gray-500":"text-gray-400"),children:["(",e.class.subject,")"]}),s?(0,a.jsx)(n.A,{className:"h-5 w-5 text-green-500"}):(0,a.jsx)(el.A,{className:"h-5 w-5 text-red-500"})]}),(0,a.jsxs)("p",{className:"text-sm mt-1 ".concat(s?"text-gray-600":"text-gray-500"),children:["OTP: ",(0,a.jsx)("span",{className:"font-mono font-semibold ".concat(s?"":"text-gray-400"),children:e.otp})]}),(0,a.jsxs)("p",{className:"text-sm mt-1 ".concat(s?"text-gray-500":"text-red-900"),children:["Valid until: ",new Date(e.validUntil).toLocaleString(),!s&&(0,a.jsx)("span",{className:"ml-2 text-xs font-medium",children:"(EXPIRED)"})]})]}),(0,a.jsxs)("div",{className:"flex space-x-3",children:[s?(0,a.jsxs)("button",{onClick:()=>T(e),className:"flex items-center space-x-2 px-4 py-2 bg-cmu-maroon text-white hover:bg-cmu-maroon-dark rounded-lg transition-all duration-200 shadow-sm font-medium",title:"Generate QR Code for this session",children:[(0,a.jsx)(o.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Show QR"})]}):(0,a.jsxs)("div",{className:"flex items-center space-x-2 px-4 py-2 bg-gray-100 text-gray-500 rounded-lg cursor-not-allowed",children:[(0,a.jsx)(o.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Session Expired"})]}),(0,a.jsxs)("button",{onClick:()=>{C(e.id),B(e.id)},className:"flex items-center space-x-2 px-4 py-2 bg-cmu-gold text-cmu-maroon hover:bg-cmu-gold-dark hover:text-white rounded-lg transition-all duration-200 shadow-sm font-medium",title:"View attendance records for this session",children:[(0,a.jsx)(j.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"View Attendance"})]})]})]})},e.id)})}),0===O.length&&(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(d.A,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,a.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No active sessions"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Create a new session to start tracking attendance."})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,a.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Attendance Records"})}),(0,a.jsxs)("div",{className:"overflow-x-auto",children:[(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Class"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Timestamp"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:z.map(e=>{var s;return(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.student.name}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:e.student.email})]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(null==(s=t.find(s=>s.id===e.sessionId))?void 0:s.class.name)||"Unknown"}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.timestamp).toLocaleString()})]},e.id)})})]}),0===z.length&&(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(j.A,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,a.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No attendance records"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Attendance records will appear here once students mark their attendance."})]})]})]}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Mark Attendance (Student)"}),(0,a.jsxs)("div",{className:"flex space-x-4",children:[(0,a.jsx)("input",{type:"text",placeholder:"Enter OTP from teacher",className:"flex-1 border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-cmu-maroon focus:border-cmu-maroon",onKeyPress:e=>{if("Enter"===e.key){let s=e.target.value;s&&(U(s),e.target.value="")}}}),(0,a.jsx)("button",{onClick:()=>{let e=document.querySelector('input[placeholder="Enter OTP from teacher"]');(null==e?void 0:e.value)&&(U(e.value),e.value="")},className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700",children:"Mark Attendance"})]})]})]})}function ec(){let[e,s]=(0,r.useState)("enrollments"),[t,l]=(0,r.useState)([]),[i,c]=(0,r.useState)([]),[d,m]=(0,r.useState)([]),[x,u]=(0,r.useState)(!1),{alert:h,showAlert:g,dismissAlert:j}=ee({timeout:6e3}),[f,y]=(0,r.useState)("");(0,r.useEffect)(()=>{b()},[]);let b=async()=>{u(!0);try{let[e,s,t]=await Promise.all([P.get("/enrollments/available"),P.get("/enrollments"),P.get("/attendance")]);l(e.data),c(s.data),m(t.data)}catch(t){var e,s;g((null==(s=t.response)||null==(e=s.data)?void 0:e.message)||"Failed to fetch data","error")}finally{u(!1)}},N=async e=>{try{await P.post("/enrollments/".concat(e)),b(),g("Successfully enrolled in class!","success")}catch(e){var s,t;g((null==(t=e.response)||null==(s=t.data)?void 0:s.message)||"Failed to enroll in class","error")}},v=async e=>{try{await P.delete("/enrollments/".concat(e)),b(),g("Successfully unenrolled from class!","success")}catch(e){var s,t;g((null==(t=e.response)||null==(s=t.data)?void 0:s.message)||"Failed to unenroll from class","error")}},w=async()=>{if(!f.trim())return void g("Please enter an OTP","warning");try{let e=await new Promise((e,s)=>{navigator.geolocation.getCurrentPosition(e,s,{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})}),s={otp:f,latitude:e.coords.latitude,longitude:e.coords.longitude,userAgent:navigator.userAgent,screenResolution:"".concat(screen.width,"x").concat(screen.height)};await P.post("/attendance/mark",s),y(""),b(),g("Attendance marked successfully!","success")}catch(t){if(t instanceof GeolocationPositionError)g("Location permission required. Please enable location services to mark attendance.","error");else{var e,s;let a=(null==(s=t.response)||null==(e=s.data)?void 0:e.message)||"Failed to mark attendance";a.includes("Location verification failed")||a.includes("Too far from class")?g("".concat(a,". Please ensure you are in the correct classroom and try again."),"error"):a.includes("Location permission required")?g("Location permission required. Please enable location services in your browser settings and try again.","error"):g(a,"error")}}};return x?(0,a.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-3xl font-bold text-cmu-maroon",children:"Student Dashboard"}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"Manage your classes and track your attendance"})]}),h&&(0,a.jsx)(H,{message:h.message,type:h.type,onDismiss:j}),(0,a.jsx)("div",{className:"nav-cmu",children:(0,a.jsx)("nav",{className:"-mb-px flex space-x-8",children:[{id:"enrollments",label:"My Classes",icon:p.A},{id:"attendance",label:"Mark Attendance",icon:o.A},{id:"records",label:"Attendance Records",icon:n.A}].map(t=>{let r=t.icon;return(0,a.jsxs)("button",{onClick:()=>s(t.id),className:"nav-item flex items-center space-x-2 py-2 px-1 border-b-4 font-medium text-sm ".concat(e===t.id?"active border-cmu-maroon rounded ":"border-transparent hover:border-cmu-maroon"),children:[(0,a.jsx)(r,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:t.label})]},t.id)})})}),"enrollments"===e&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white shadow rounded-lg",children:[(0,a.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Available Classes"})}),(0,a.jsx)("div",{className:"p-6",children:0===t.length?(0,a.jsx)("p",{className:"text-gray-500 text-center py-4",children:"No available classes to enroll in."}):(0,a.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:t.map(e=>(0,a.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:e.name}),e.subject&&(0,a.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["Subject: ",e.subject]}),e.schedule&&(0,a.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["Schedule: ",e.schedule]}),(0,a.jsxs)("p",{className:"text-sm text-gray-500 mt-2",children:["Teacher: ",e.teacher.name]}),(0,a.jsxs)("button",{onClick:()=>N(e.id),className:"btn-cmu-primary mt-3 w-full flex items-center justify-center space-x-2 text-sm",children:[(0,a.jsx)(G.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Enroll"})]})]},e.id))})})]}),(0,a.jsxs)("div",{className:"bg-white shadow rounded-lg",children:[(0,a.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"My Classes"})}),(0,a.jsx)("div",{className:"p-6",children:0===i.length?(0,a.jsx)("p",{className:"text-gray-500 text-center py-4",children:"You are not enrolled in any classes."}):(0,a.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:i.map(e=>(0,a.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:e.class.name}),e.class.subject&&(0,a.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["Subject: ",e.class.subject]}),e.class.schedule&&(0,a.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["Schedule: ",e.class.schedule]}),(0,a.jsxs)("p",{className:"text-sm text-gray-500 mt-2",children:["Teacher: ",e.class.teacher.name]}),(0,a.jsxs)("p",{className:"text-xs text-gray-400 mt-2",children:["Enrolled: ",new Date(e.enrolledAt).toLocaleDateString()]}),(0,a.jsxs)("button",{onClick:()=>v(e.class.id),className:"btn-cmu-secondary mt-3 w-full flex items-center justify-center space-x-2 text-sm",children:[(0,a.jsx)(V.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Unenroll"})]})]},e.id))})})]})]}),"attendance"===e&&(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsxs)("div",{className:"bg-white shadow rounded-lg",children:[(0,a.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Mark Attendance"})}),(0,a.jsx)("div",{className:"p-6",children:(0,a.jsxs)("div",{className:"max-w-md mx-auto",children:[(0,a.jsx)("label",{htmlFor:"otp",className:"block text-sm font-medium text-gray-700 mb-2",children:"Enter OTP from QR Code"}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("input",{type:"text",id:"otp",value:f,onChange:e=>y(e.target.value),placeholder:"Enter 6-digit OTP",className:"flex-1 border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-cmu-maroon focus:border-transparent"}),(0,a.jsxs)("button",{onClick:w,className:"btn-cmu-primary flex items-center space-x-2",children:[(0,a.jsx)(n.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Mark"})]})]}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"Scan the QR code displayed by your teacher to get the OTP."}),(0,a.jsxs)("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-blue-900 mb-2",children:"\uD83D\uDCCD Location Requirements"}),(0,a.jsxs)("ul",{className:"text-xs text-blue-800 space-y-1",children:[(0,a.jsx)("li",{children:"• You must be physically present in the classroom"}),(0,a.jsx)("li",{children:"• Location services must be enabled in your browser"}),(0,a.jsx)("li",{children:"• You must be within 50 meters of the class location"}),(0,a.jsx)("li",{children:"• If you're in the correct room but get an error, ask your teacher to check the class location settings"})]})]})]})})]})}),"records"===e&&(0,a.jsxs)("div",{className:"bg-white shadow rounded-lg",children:[(0,a.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Attendance Records"})}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Class"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date & Time"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:0===d.length?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:3,className:"px-6 py-4 text-center text-gray-500",children:"No attendance records found."})}):d.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.session.class.name}),e.session.class.subject&&(0,a.jsx)("div",{className:"text-sm text-gray-500",children:e.session.class.subject})]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(e.timestamp).toLocaleString()}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[(0,a.jsx)(n.A,{className:"h-3 w-3 mr-1"}),"Present"]})})]},e.id))})]})})]})]})}function ed(){let[e,s]=(0,r.useState)(!1);return e?(0,a.jsx)(T,{onBack:()=>s(!1)}):(0,a.jsxs)("div",{className:"min-h-screen bg-white",children:[(0,a.jsx)("header",{className:"header-cmu",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex justify-between items-center h-20",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(C.default,{size:48,variant:"light",showText:!1}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-white",children:"AttendIQ"}),(0,a.jsx)("p",{className:"text-sm text-cmu-gold-light",children:"Central Michigan University"})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("a",{href:"/business-model",className:"text-white hover:text-cmu-gold transition-colors duration-200 font-medium",children:"Business Model"}),(0,a.jsx)("button",{onClick:()=>s(!0),className:"btn-cmu-secondary",children:"Sign In"})]})]})})}),(0,a.jsxs)("section",{className:"relative bg-gradient-to-br from-gray-50 via-white to-gray-50 py-24 lg:py-32",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-cmu-maroon/5 to-cmu-gold/5"}),(0,a.jsx)("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"inline-flex items-center px-4 py-2 rounded-full bg-cmu-maroon/10 text-cmu-maroon text-sm font-medium mb-8",children:[(0,a.jsx)("span",{className:"w-2 h-2 bg-cmu-maroon rounded-full mr-2"}),"Central Michigan University"]}),(0,a.jsxs)("h1",{className:"text-5xl md:text-7xl font-bold text-gray-900 mb-8 leading-tight",children:["AttendIQ",(0,a.jsx)("span",{className:"block text-cmu-maroon bg-gradient-to-r from-cmu-maroon to-cmu-maroon-dark bg-clip-text text-transparent",children:"Smart Attendance"})]}),(0,a.jsx)("p",{className:"text-xl md:text-2xl text-gray-600 mb-12 max-w-4xl mx-auto leading-relaxed",children:"Streamline classroom management with Session Manager, QR codes, OTP verification, and real-time attendance tracking for Central Michigan University."}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-6 justify-center items-center",children:[(0,a.jsxs)("button",{onClick:()=>s(!0),className:"flex group btn-cmu-primary text-lg px-10 py-5 shadow-lg hover:shadow-xl transform hover:-translate-y-1 transition-all duration-300",children:["Get Started",(0,a.jsx)(l.A,{className:"ml-2 h-5 w-5 group-hover:translate-x-1 transition-transform mt-1"})]}),(0,a.jsxs)("button",{className:"flex group btn-cmu-secondary text-lg px-10 py-5 shadow-lg hover:shadow-xl transform hover:-translate-y-1 transition-all duration-300",children:["Sign In",(0,a.jsx)(l.A,{className:"ml-2 h-5 w-5 group-hover:translate-x-1 transition-transform mt-1"})]})]}),(0,a.jsxs)("div",{className:"mt-16 flex justify-center items-center space-x-8 text-gray-400",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(n.A,{className:"h-5 w-5 text-green-500"}),(0,a.jsx)("span",{className:"text-sm",children:"Secure & Reliable"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(n.A,{className:"h-5 w-5 text-green-500"}),(0,a.jsx)("span",{className:"text-sm",children:"Mobile Optimized"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(n.A,{className:"h-5 w-5 text-green-500"}),(0,a.jsx)("span",{className:"text-sm",children:"Real-time Updates"})]})]})]})})]}),(0,a.jsxs)("section",{className:"py-24 bg-white relative",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-b from-gray-50/50 to-transparent"}),(0,a.jsxs)("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,a.jsxs)("div",{className:"text-center mb-20",children:[(0,a.jsxs)("div",{className:"inline-flex items-center px-4 py-2 rounded-full bg-cmu-gold/20 text-cmu-maroon text-sm font-medium mb-6",children:[(0,a.jsx)(i.A,{className:"h-4 w-4 mr-2"}),"Powerful Features"]}),(0,a.jsx)("h2",{className:"text-4xl md:text-5xl font-bold text-gray-900 mb-6",children:"Everything You Need"}),(0,a.jsx)("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto leading-relaxed",children:"Comprehensive tools for efficient classroom attendance management and student engagement"})]}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:[(0,a.jsxs)("div",{className:"group relative bg-white rounded-2xl p-8 shadow-lg hover:shadow-2xl border border-gray-100 hover:border-cmu-maroon/20 transition-all duration-300 transform hover:-translate-y-2",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-cmu-maroon/5 to-transparent rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-gradient-to-br from-cmu-maroon to-cmu-maroon-dark rounded-2xl flex items-center justify-center mx-auto mb-6 shadow-lg group-hover:shadow-xl transition-shadow duration-300",children:(0,a.jsx)(o.A,{className:"h-8 w-8 text-white"})}),(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-4 group-hover:text-cmu-maroon transition-colors",children:"QR Code Scanning"}),(0,a.jsx)("p",{className:"text-gray-600 leading-relaxed",children:"Students can quickly mark attendance by scanning QR codes displayed in the classroom with their smartphones."})]})]}),(0,a.jsxs)("div",{className:"group relative bg-white rounded-2xl p-8 shadow-lg hover:shadow-2xl border border-gray-100 hover:border-cmu-maroon/20 transition-all duration-300 transform hover:-translate-y-2",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-cmu-maroon/5 to-transparent rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-gradient-to-br from-cmu-maroon to-cmu-maroon-dark rounded-2xl flex items-center justify-center mx-auto mb-6 shadow-lg group-hover:shadow-xl transition-shadow duration-300",children:(0,a.jsx)(c.A,{className:"h-8 w-8 text-white"})}),(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-4 group-hover:text-cmu-maroon transition-colors",children:"OTP Verification"}),(0,a.jsx)("p",{className:"text-gray-600 leading-relaxed",children:"Secure one-time password verification ensures only authorized students can mark attendance."})]})]}),(0,a.jsxs)("div",{className:"group relative bg-white rounded-2xl p-8 shadow-lg hover:shadow-2xl border border-gray-100 hover:border-cmu-maroon/20 transition-all duration-300 transform hover:-translate-y-2",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-cmu-maroon/5 to-transparent rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-gradient-to-br from-cmu-maroon to-cmu-maroon-dark rounded-2xl flex items-center justify-center mx-auto mb-6 shadow-lg group-hover:shadow-xl transition-shadow duration-300",children:(0,a.jsx)(d.A,{className:"h-8 w-8 text-white"})}),(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-4 group-hover:text-cmu-maroon transition-colors",children:"Real-time Tracking"}),(0,a.jsx)("p",{className:"text-gray-600 leading-relaxed",children:"Monitor attendance in real-time with instant updates and notifications for teachers and administrators."})]})]}),(0,a.jsxs)("div",{className:"group relative bg-white rounded-2xl p-8 shadow-lg hover:shadow-2xl border border-gray-100 hover:border-cmu-maroon/20 transition-all duration-300 transform hover:-translate-y-2",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-cmu-maroon/5 to-transparent rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-gradient-to-br from-cmu-maroon to-cmu-maroon-dark rounded-2xl flex items-center justify-center mx-auto mb-6 shadow-lg group-hover:shadow-xl transition-shadow duration-300",children:(0,a.jsx)(m.A,{className:"h-8 w-8 text-white"})}),(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-4 group-hover:text-cmu-maroon transition-colors",children:"Analytics & Reports"}),(0,a.jsx)("p",{className:"text-gray-600 leading-relaxed",children:"Comprehensive attendance reports and analytics for better insights and decision making."})]})]}),(0,a.jsxs)("div",{className:"group relative bg-white rounded-2xl p-8 shadow-lg hover:shadow-2xl border border-gray-100 hover:border-cmu-maroon/20 transition-all duration-300 transform hover:-translate-y-2",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-cmu-maroon/5 to-transparent rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-gradient-to-br from-cmu-maroon to-cmu-maroon-dark rounded-2xl flex items-center justify-center mx-auto mb-6 shadow-lg group-hover:shadow-xl transition-shadow duration-300",children:(0,a.jsx)(x.A,{className:"h-8 w-8 text-white"})}),(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-4 group-hover:text-cmu-maroon transition-colors",children:"Mobile Optimized"}),(0,a.jsx)("p",{className:"text-gray-600 leading-relaxed",children:"Fully responsive design works perfectly on all devices and screen sizes for seamless user experience."})]})]}),(0,a.jsxs)("div",{className:"group relative bg-white rounded-2xl p-8 shadow-lg hover:shadow-2xl border border-gray-100 hover:border-cmu-maroon/20 transition-all duration-300 transform hover:-translate-y-2",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-cmu-maroon/5 to-transparent rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-gradient-to-br from-cmu-maroon to-cmu-maroon-dark rounded-2xl flex items-center justify-center mx-auto mb-6 shadow-lg group-hover:shadow-xl transition-shadow duration-300",children:(0,a.jsx)(u.A,{className:"h-8 w-8 text-white"})}),(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-4 group-hover:text-cmu-maroon transition-colors",children:"Location Verification"}),(0,a.jsx)("p",{className:"text-gray-600 leading-relaxed",children:"GPS-based location verification ensures students are physically present in class for accurate attendance."})]})]})]})]})]}),(0,a.jsxs)("section",{className:"py-24 bg-gradient-to-br from-gray-50 to-white relative overflow-hidden",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-cmu-maroon/5 via-transparent to-cmu-gold/5"}),(0,a.jsx)("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"grid lg:grid-cols-2 gap-20 items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"inline-flex items-center px-4 py-2 rounded-full bg-cmu-gold/20 text-cmu-maroon text-sm font-medium mb-6",children:[(0,a.jsx)(h.A,{className:"h-4 w-4 mr-2"}),"Benefits for Everyone"]}),(0,a.jsx)("h2",{className:"text-4xl md:text-5xl font-bold text-gray-900 mb-8 leading-tight",children:"Designed for Success"}),(0,a.jsxs)("div",{className:"space-y-10",children:[(0,a.jsxs)("div",{className:"group flex items-start space-x-6 p-6 rounded-2xl hover:bg-white/50 transition-all duration-300",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-cmu-gold to-cmu-gold-dark rounded-2xl flex items-center justify-center flex-shrink-0 shadow-lg group-hover:shadow-xl transition-shadow duration-300",children:(0,a.jsx)(n.A,{className:"h-6 w-6 text-cmu-maroon"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-2xl font-bold text-gray-900 mb-3 group-hover:text-cmu-maroon transition-colors",children:"For Teachers"}),(0,a.jsx)("p",{className:"text-gray-600 leading-relaxed text-lg",children:"Streamline attendance taking, reduce administrative burden, and focus more on teaching with automated tracking and comprehensive reporting."})]})]}),(0,a.jsxs)("div",{className:"group flex items-start space-x-6 p-6 rounded-2xl hover:bg-white/50 transition-all duration-300",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-cmu-gold to-cmu-gold-dark rounded-2xl flex items-center justify-center flex-shrink-0 shadow-lg group-hover:shadow-xl transition-shadow duration-300",children:(0,a.jsx)(n.A,{className:"h-6 w-6 text-cmu-maroon"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-2xl font-bold text-gray-900 mb-3 group-hover:text-cmu-maroon transition-colors",children:"For Students"}),(0,a.jsx)("p",{className:"text-gray-600 leading-relaxed text-lg",children:"Quick and easy attendance marking with your smartphone, real-time attendance status, and transparent tracking for better engagement."})]})]}),(0,a.jsxs)("div",{className:"group flex items-start space-x-6 p-6 rounded-2xl hover:bg-white/50 transition-all duration-300",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-cmu-gold to-cmu-gold-dark rounded-2xl flex items-center justify-center flex-shrink-0 shadow-lg group-hover:shadow-xl transition-shadow duration-300",children:(0,a.jsx)(n.A,{className:"h-6 w-6 text-cmu-maroon"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-2xl font-bold text-gray-900 mb-3 group-hover:text-cmu-maroon transition-colors",children:"For Administration"}),(0,a.jsx)("p",{className:"text-gray-600 leading-relaxed text-lg",children:"Comprehensive reporting, compliance tracking, and data-driven insights for better academic management and decision making."})]})]})]})]}),(0,a.jsx)("div",{className:"relative",children:(0,a.jsxs)("div",{className:"relative bg-white rounded-3xl shadow-2xl p-10 border border-gray-100",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-cmu-maroon/5 to-cmu-gold/5 rounded-3xl"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("div",{className:"text-center mb-10",children:[(0,a.jsx)("div",{className:"flex items-center justify-center mx-auto mb-6",children:(0,a.jsx)(C.default,{size:96,variant:"color",showText:!1})}),(0,a.jsx)("h3",{className:"text-3xl font-bold text-gray-900 mb-3",children:"AttendIQ"}),(0,a.jsx)("p",{className:"text-gray-600 text-lg",children:"Trusted by Central Michigan University"})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4 p-4 rounded-xl bg-gray-50/50 hover:bg-gray-50 transition-colors duration-300",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-cmu-gold rounded-xl flex items-center justify-center",children:(0,a.jsx)(i.A,{className:"h-5 w-5 text-cmu-maroon"})}),(0,a.jsx)("span",{className:"text-gray-700 font-medium text-lg",children:"Secure & Reliable"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 p-4 rounded-xl bg-gray-50/50 hover:bg-gray-50 transition-colors duration-300",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-cmu-gold rounded-xl flex items-center justify-center",children:(0,a.jsx)(i.A,{className:"h-5 w-5 text-cmu-maroon"})}),(0,a.jsx)("span",{className:"text-gray-700 font-medium text-lg",children:"Easy to Use"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 p-4 rounded-xl bg-gray-50/50 hover:bg-gray-50 transition-colors duration-300",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-cmu-gold rounded-xl flex items-center justify-center",children:(0,a.jsx)(i.A,{className:"h-5 w-5 text-cmu-maroon"})}),(0,a.jsx)("span",{className:"text-gray-700 font-medium text-lg",children:"Real-time Updates"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 p-4 rounded-xl bg-gray-50/50 hover:bg-gray-50 transition-colors duration-300",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-cmu-gold rounded-xl flex items-center justify-center",children:(0,a.jsx)(i.A,{className:"h-5 w-5 text-cmu-maroon"})}),(0,a.jsx)("span",{className:"text-gray-700 font-medium text-lg",children:"Mobile Optimized"})]})]})]})]})})]})})]}),(0,a.jsxs)("footer",{className:"bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 text-white py-16 relative overflow-hidden",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-cmu-maroon/10 to-cmu-gold/10"}),(0,a.jsxs)("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,a.jsxs)("div",{className:"grid md:grid-cols-4 gap-12",children:[(0,a.jsxs)("div",{className:"md:col-span-1",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,a.jsx)(C.default,{size:48,variant:"color",showText:!1}),(0,a.jsx)("div",{children:(0,a.jsx)("h3",{className:"text-xl font-bold",children:"AttendIQ"})})]}),(0,a.jsx)("p",{className:"text-gray-400 text-sm leading-relaxed mb-6",children:"Modern attendance tracking system designed specifically for Central Michigan University's academic community."}),(0,a.jsx)("div",{className:"flex space-x-4",children:(0,a.jsx)("div",{className:"w-8 h-8 bg-cmu-maroon rounded-lg flex items-center justify-center hover:bg-cmu-maroon-dark transition-colors cursor-pointer",children:(0,a.jsx)("span",{className:"text-xs font-bold",children:"CMU"})})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-bold text-lg mb-6 text-cmu-gold",children:"Features"}),(0,a.jsxs)("ul",{className:"space-y-3 text-sm text-gray-300",children:[(0,a.jsx)("li",{className:"hover:text-cmu-gold transition-colors cursor-pointer",children:"QR Code Scanning"}),(0,a.jsx)("li",{className:"hover:text-cmu-gold transition-colors cursor-pointer",children:"OTP Verification"}),(0,a.jsx)("li",{className:"hover:text-cmu-gold transition-colors cursor-pointer",children:"Real-time Tracking"}),(0,a.jsx)("li",{className:"hover:text-cmu-gold transition-colors cursor-pointer",children:"Analytics & Reports"}),(0,a.jsx)("li",{className:"hover:text-cmu-gold transition-colors cursor-pointer",children:"Location Verification"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-bold text-lg mb-6 text-cmu-gold",children:"Support"}),(0,a.jsxs)("ul",{className:"space-y-3 text-sm text-gray-300",children:[(0,a.jsx)("li",{className:"hover:text-cmu-gold transition-colors cursor-pointer",children:"Help Center"}),(0,a.jsx)("li",{className:"hover:text-cmu-gold transition-colors cursor-pointer",children:"Documentation"}),(0,a.jsx)("li",{className:"hover:text-cmu-gold transition-colors cursor-pointer",children:"Contact Support"}),(0,a.jsx)("li",{className:"hover:text-cmu-gold transition-colors cursor-pointer",children:"System Status"}),(0,a.jsx)("li",{className:"hover:text-cmu-gold transition-colors cursor-pointer",children:"Training Resources"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-bold text-lg mb-6 text-cmu-gold",children:"Central Michigan University"}),(0,a.jsxs)("ul",{className:"space-y-3 text-sm text-gray-300",children:[(0,a.jsx)("li",{className:"hover:text-cmu-gold transition-colors cursor-pointer",children:"Mount Pleasant, MI"}),(0,a.jsx)("li",{className:"hover:text-cmu-gold transition-colors cursor-pointer",children:"Go Chippewas!"}),(0,a.jsx)("li",{className:"hover:text-cmu-gold transition-colors cursor-pointer",children:"Academic Excellence"}),(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:"/business-model",className:"hover:text-cmu-gold transition-colors cursor-pointer",children:"Business Model"})})]})]})]}),(0,a.jsx)("div",{className:"border-t border-gray-700 mt-12 pt-8",children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center space-y-4 md:space-y-0",children:[(0,a.jsx)("p",{className:"text-sm text-gray-400",children:"\xa9 2025 Central Michigan University. All rights reserved."}),(0,a.jsx)("div",{className:"flex items-center space-x-6 text-sm text-gray-400",children:(0,a.jsxs)("span",{className:"hover:text-cmu-gold transition-colors cursor-pointer",children:["Made by ",(0,a.jsx)("a",{href:"https://prosper-mapepa-portfolio.netlify.app",target:"_blank",rel:"noopener noreferrer",className:"hover:text-cmu-gold transition-colors cursor-pointer font-bold text-white",children:"Prosper Mapepa \uD83D\uDE03"})]})})]})})]})]})]})}function em(){let{user:e,logout:s,loading:t}=D(),[l,n]=(0,r.useState)("classes");return t?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)(C.default,{size:80,variant:"color",showText:!1})}),(0,a.jsx)("h2",{className:"mt-6 text-center text-3xl font-extrabold text-cmu-maroon",children:"AttendIQ"}),(0,a.jsx)("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Please wait while we load your account..."}),(0,a.jsx)("div",{className:"mt-4 flex justify-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-cmu-maroon"})})]})}):e?(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("header",{className:"header-cmu",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex justify-between items-center h-20",children:[(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(C.default,{size:48,variant:"light",showText:!1}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-white",children:"AttendIQ"}),(0,a.jsx)("p",{className:"text-sm text-cmu-gold-light",children:"Central Michigan University"})]})]})}),(0,a.jsxs)("div",{className:"flex items-center space-x-3 sm:space-x-4",children:[(0,a.jsxs)("div",{className:"text-right hidden sm:block",children:[(0,a.jsxs)("p",{className:"text-sm text-white font-medium",children:["Welcome, ",e.name]}),(0,a.jsx)("p",{className:"text-xs text-cmu-gold-light",children:"TEACHER"===e.role?"Faculty":"Student"})]}),(0,a.jsxs)("div",{className:"text-right sm:hidden",children:[(0,a.jsx)("p",{className:"text-xs text-white font-medium",children:e.name}),(0,a.jsx)("p",{className:"text-xs text-cmu-gold-light",children:"TEACHER"===e.role?"Faculty":"Student"})]}),(0,a.jsxs)("button",{onClick:s,className:"flex items-center space-x-1 sm:space-x-2 bg-cmu-gold text-cmu-maroon px-3 sm:px-4 py-2 rounded-lg font-medium hover:bg-cmu-gold-dark hover:text-white transition-all duration-200 shadow-sm",children:[(0,a.jsx)(g.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Logout"})]})]})]})})}),"TEACHER"===e.role&&(0,a.jsx)("nav",{className:"nav-cmu",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsx)("div",{className:"flex space-x-8",children:[{id:"classes",label:"Classes",icon:p.A},{id:"attendance",label:"Attendance",icon:j.A}].map(e=>{let s=e.icon;return(0,a.jsxs)("button",{onClick:()=>n(e.id),className:"nav-item flex items-center space-x-2 py-4 px-1 border-b-4 font-medium text-sm ".concat(l===e.id?"active border-cmu-maroon rounded":"border-transparent hover:border-cmu-maroon"),children:[(0,a.jsx)(s,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:e.label})]},e.id)})})})}),(0,a.jsx)("main",{className:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8",children:"TEACHER"===e.role?(0,a.jsxs)(a.Fragment,{children:["classes"===l&&(0,a.jsx)(er,{}),"attendance"===l&&(0,a.jsx)(eo,{})]}):(0,a.jsx)(ec,{})})]}):(0,a.jsx)(ed,{})}function ex(){return(0,a.jsx)(R,{children:(0,a.jsx)(em,{})})}},9160:(e,s,t)=>{"use strict";t.d(s,{default:()=>r});var a=t(6166);function r(e){let{size:s=48,variant:t="color",showText:r=!0,className:l=""}=e,n={dark:{primary:"#8F1A27",secondary:"#1F2937",text:"#1F2937"},light:{primary:"#FFFFFF",secondary:"#F3F4F6",text:"#FFFFFF"},color:{primary:"#8F1A27",secondary:"#FDB913",text:"#1F2937"}}[t],i=r?2.5*s:0,o=s+i+(r?.3*s:0);return(0,a.jsx)("div",{className:"inline-flex items-center ".concat(l),style:{height:s},children:(0,a.jsxs)("svg",{width:o,height:s,viewBox:"0 0 ".concat(o," ").concat(s),fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsxs)("g",{children:[(0,a.jsx)("circle",{cx:s/2,cy:s/2,r:s/2-2,fill:n.primary,opacity:"0.1"}),(0,a.jsx)("circle",{cx:s/2,cy:s/2,r:s/2.5,fill:n.primary}),(0,a.jsx)("path",{d:"M ".concat(.32*s," ").concat(.5*s," L ").concat(.43*s," ").concat(.62*s," L ").concat(.68*s," ").concat(.38*s),stroke:"dark"===t?n.secondary:"#FFFFFF",strokeWidth:.08*s,strokeLinecap:"round",strokeLinejoin:"round"})]}),r&&(0,a.jsxs)("text",{x:s+.3*s,y:.62*s,fill:n.text,fontSize:.45*s,fontWeight:"700",fontFamily:"system-ui, -apple-system, sans-serif",children:["Attend",(0,a.jsx)("tspan",{fill:n.primary,fontWeight:"800",children:"IQ"})]})]})})}t(5766)},9858:(e,s,t)=>{Promise.resolve().then(t.bind(t,8335))}},e=>{e.O(0,[828,544,134,358],()=>e(e.s=9858)),_N_E=e.O()}]);